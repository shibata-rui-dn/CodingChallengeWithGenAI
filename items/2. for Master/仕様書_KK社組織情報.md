# KK社組織情報システム

SSO認証システムと連携する組織階層管理および従業員データ管理システムです。

## 組織概要

KK社は8つの主要部署からなるテクノロジー企業です。総従業員数約1,000名の組織体系をSSO認証システムで一元管理しています。

### 部署構成

| 部署名 | 主要機能 |
|--------|----------|
| 経営陣 | 企業戦略・意思決定 |
| 開発部 | システム開発・保守 |
| プロダクト部 | プロダクト企画・設計 |
| 営業部 | 売上拡大・顧客開拓 |
| マーケティング部 | ブランディング・集客 |
| 人事部 | 人材採用・労務管理 |
| 総務・経理部 | 管理業務・財務 |
| カスタマーサクセス部 | 顧客支援・満足度向上 |

### 組織ツリー

```
KK Company
├── 経営陣
│   └── CEO Office
├── 開発部
│   ├── フロントエンド
│   ├── バックエンド
│   ├── インフラ
│   ├── モバイル
│   ├── AI・ML
│   └── QA
├── プロダクト部
│   ├── プロダクトマネジメント
│   ├── UI/UX
│   └── データアナリスト
├── 営業部
│   ├── エンタープライズ
│   ├── SMB
│   └── パートナー
├── マーケティング部
│   ├── デジタルマーケティング
│   ├── コンテンツ
│   └── イベント
├── 人事部
│   ├── 採用
│   ├── 労務
│   └── 人事企画
├── 総務・経理部
│   ├── 総務
│   ├── 経理
│   └── 法務
└── カスタマーサクセス部
    ├── サポート
    ├── オンボーディング
    └── アカウントマネジメント
```

## 組織階層

### 職位体系
```
Level 1: CEO
Level 2: CTO, CPO, CFO, CHRO
Level 3: 部長
Level 4: チームリーダー / マネージャー
Level 5: シニア職
Level 6: 一般職
Level 7: アソシエイト / ジュニア職
```

### チーム構成

#### 開発部
- **フロントエンド**: UI/UX実装
- **バックエンド**: サーバーサイド開発
- **インフラ**: システム運用・基盤
- **モバイル**: アプリケーション開発
- **AI・ML**: 機械学習・データサイエンス
- **QA**: 品質保証・テスト

#### プロダクト部
- **プロダクトマネジメント**: 製品戦略・企画
- **UI/UX**: ユーザー体験設計
- **データアナリスト**: データ分析・洞察

#### 営業部
- **エンタープライズ**: 大企業向け営業
- **SMB**: 中小企業向け営業
- **パートナー**: パートナー連携・チャネル営業

#### その他部署
各部署は3つの専門チームで構成され、効率的な業務分担を実現しています。

## SSO連携

### 組織データ統合
SSO認証システムでは、以下の組織情報がユーザーアカウントに紐付けられます：

- **部署情報**: `department` フィールド
- **チーム情報**: `team` フィールド  
- **上司関係**: `supervisor` フィールド（メールアドレス）
- **職位情報**: `role` / `position` フィールド

### OAuthスコープ連携
`organization` スコープにより、認証されたユーザーの組織情報がクライアントアプリケーションに提供されます：

```json
{
  "department": "開発部",
  "team": "バックエンド",
  "supervisor": "manager@kk.co.com",
  "position": "シニアエンジニア"
}
```

## データ管理

### 従業員データ形式
```json
{
  "employeeId": "KK12345",
  "name": "田中 太郎",
  "email": "tanaka.taro@kk.co.com",
  "department": "開発部",
  "team": "バックエンド",
  "position": "シニアエンジニア",
  "supervisor": "sato.hanako@kk.co.com"
}
```

### 一括インポート
組織データの一括更新は専用スクリプトで実行します：

```bash
# 従業員データ生成
node create_employee.js

# SSO システムへインポート
node scripts/import-employees.js --file employee.json

# 組織統計確認
node scripts/import-employees.js --stats
```

### データ整合性
- **ユニーク制約**: 従業員ID、メールアドレス
- **階層整合性**: 上司関係の循環参照防止
- **部署・チーム整合性**: 定義済み組織構造との照合

## 管理機能

### 組織情報の更新
SSO管理画面（`/admin`）から以下の操作が可能です：

- **ユーザー管理**: 部署・チーム変更
- **組織統計**: 部署別従業員数表示
- **階層表示**: 上司-部下関係の可視化

### セキュリティ考慮事項
- 組織情報は`organization`スコープでのみアクセス可能
- 管理者権限での組織データ変更ログ
- 個人情報保護に配慮したデータ最小化

---

**最終更新**: 2025年7月
**バージョン**: 2.0.0